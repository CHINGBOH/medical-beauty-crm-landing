# 医美智能营销管理系统 - 开发任务清单

## ✅ 已完成功能

### 基础架构
- [x] 设计医美风格主题配色和字体
- [x] 配置全局样式和 Tailwind 主题
- [x] 设计数据库表结构（本地 + Airtable 映射）
- [x] 实现 Airtable API 集成工具函数
- [x] 配置 DeepSeek API 集成
- [x] 配置 Qwen API 集成
- [x] 创建知识库数据表结构

### AI 客服机器人
- [x] 创建聊天界面组件（使用 AIChatBox）
- [x] 实现 LLM 对话接口（DeepSeek API）
- [x] 设计医美行业专业 prompt
- [x] 实现对话中自动提取客户信息
- [x] 创建对话历史记录表
- [x] 实现对话转线索功能

### 知识库系统
- [x] 创建知识库数据表（标题、内容、分类、标签）
- [x] 集成 RAG 检索增强生成
- [x] 导入医美项目初始知识
- [x] 添加知识引用统计功能

### 引流落地页
- [x] 创建落地页布局和导航
- [x] 实现超皮秒祛斑项目展示区
- [x] 设计并实现表单组件（姓名、手机、微信、意向项目、预算、留言）
- [x] 实现表单验证逻辑
- [x] 创建表单提交 API（tRPC procedure）
- [x] 实现 Airtable 线索写入功能
- [x] 实现 URL 参数识别来源渠道
- [x] 添加提交成功提示和引导

### Airtable 集成
- [x] 创建 Airtable 配置管理页面
- [x] 实现配置保存功能（存储到数据库）
- [x] 实现连接测试功能
- [x] 创建管理后台导航和布局
- [x] 测试完整流程
- [x] 调研 Airtable Metadata API 和 Base 创建能力
- [x] 实现自动创建 Base 功能
- [x] 实现自动创建表结构（线索表、客户表等）
- [x] 实现自动配置字段和关联
- [x] 优化配置界面为一键连接
- [x] 测试完整自动化流程

### Qwen API 集成（管理功能）
- [x] 配置 Qwen API Key
- [x] 创建 Qwen LLM 工具函数
- [x] 实现智能数据分析功能
- [x] 实现客户画像生成功能
- [x] 实现营销建议功能
- [x] 创建管理后台分析页面
- [x] 测试 Qwen API 功能

### SEO 优化
- [x] 添加首页页面标题（30-60字符）
- [x] 添加首页描述信息（50-160字符）
- [x] 添加关键词 meta 标签
- [x] 优化页面内容关键词密度
- [x] 测试 SEO 优化效果

### 品牌风格调整
- [x] 更新主题配色为妍美金棕色系（#B8A68D）
- [x] 上传并集成妍美 Logo
- [x] 更新品牌名称为"深圳妍美医疗美容门诊部"
- [x] 调整落地页配色和样式
- [x] 调整聊天页面配色和样式
- [x] 更新按钮和交互元素颜色
- [x] 调整渐变效果为金棕色系

### 紧急修复
- [x] 修复 DeepSeek API 密钥认证失败问题
- [x] 测试 AI 客服对话功能
- [x] 修复 Admin 页面 React error #301
- [x] 修复 useState 在渲染时调用的问题
- [x] 重新发布并验证
- [x] 检查 Chat 页面留资表单弹窗功能
- [x] 修复"留下联系方式"按钮点击无响应问题
- [x] 测试表单提交到 Airtable 功能

---

## 🚀 第一阶段：核心管理后台（进行中）

### Dashboard 布局
- [x] 创建 DashboardLayout 组件（侧边栏 + 内容区）
- [x] 设计侧边栏导航结构（配置、分析、对话、内容、客户）
- [x] 添加顶部导航栏（用户信息、通知、快捷操作）
- [x] 实现响应式布局（移动端适配）

### 页面重构
- [x] 重构 Admin 页面为 Dashboard 子页面
- [x] 重构 Analytics 页面为 Dashboard 子页面
- [x] 创建对话管理页面（Conversations）
- [x] 实现对话列表（分页、筛选、搜索）
- [x] 实现对话详情查看
- [ ] 实现对话标记和分类

### Airtable 双向交互
- [ ] 实现 AI 对话自动写入 Airtable
- [ ] 实现从 Airtable 读取客户信息
- [ ] 实现客户信息增强 AI 回复
- [ ] 测试双向交互功能

### 双知识库系统
- [ ] 设计双知识库数据表结构（客户问询 + 内部管理）
- [ ] 实现客户问询知识库管理页面
- [ ] 实现内部管理知识库管理页面
- [ ] 实现知识库分类和标签管理
- [ ] 实现知识库搜索和筛选
- [ ] 实现权限控制（内部知识库仅员工可见）
- [x] 编写《医美诊所知识库资料收集清单》文档
- [x] 输出客户问询知识库内容清单
- [x] 输出内部管理知识库内容清单

---

## 📝 第二阶段：内容营销系统

### 一键生成爽文
- [ ] 创建内容管理页面（Content）
- [ ] 实现一键生成爽文功能（标题 + 正文 + 话题标签）
- [ ] 实现内容模板管理（不同项目的文案模板）
- [ ] 集成图片生成功能（复用小红书图文生成）
- [ ] 实现内容预览和导出

### 素材管理
- [ ] 实现图文素材上传
- [ ] 实现素材编辑和删除
- [ ] 实现素材分类和标签
- [ ] 实现素材搜索和筛选

### 数据库
- [ ] 创建 content_posts 表
- [ ] 创建内容模板表
- [ ] 创建素材库表

---

## 👥 第三阶段：客户画像增强

### 心理标签系统
- [ ] 扩展客户表，添加心理标签字段
- [ ] 实现心理标签自动识别（LLM 分析对话）
- [ ] 实现心理动机分类（恐惧/贪婪/安全/敏感）
- [ ] 实现消费决策分类（冲动/理性/犹豫）
- [ ] 实现体验敏感度分类（视觉/听觉/触觉/嗅觉/味觉）

### 客户分层分级
- [ ] 实现客户分层逻辑（VIP/潜力/普通/流失）
- [ ] 实现消费周期追踪
- [ ] 实现客户价值计算
- [ ] 实现流失预警机制

### 客户管理页面
- [ ] 创建客户管理页面（Customers）
- [ ] 实现客户列表、筛选、搜索
- [ ] 实现客户详情页（画像 + 消费记录 + 对话历史）
- [ ] 实现重要事件标记和提醒

### 数据库
- [ ] 创建 customer_tags 表
- [ ] 创建 customer_events 表
- [ ] 创建客户分层规则表

---

## ⚡ 第四阶段：自动化触发系统

### 时间触发
- [ ] 实现生日提醒（提前7天）
- [ ] 实现节假日营销（三八、520、双11等）
- [ ] 实现定时回访（术后3/7/30天）
- [ ] 实现复购提醒（根据项目周期）

### 行为触发
- [ ] 实现客户流失预警（90天未消费）
- [ ] 实现高价值客户识别（累计消费达标）
- [ ] 实现咨询未转化跟进（3天内未预约）

### 天气触发
- [ ] 集成天气 API（和风天气/高德天气）
- [ ] 实现降温提醒（温差>8°C）
- [ ] 实现台风/暴雨预警
- [ ] 实现高温预警（>35°C）
- [ ] 实现空气质量预警（AQI>150）

### 触发管理
- [ ] 创建触发规则管理页面
- [ ] 实现触发规则配置
- [ ] 实现触发动作执行（企业微信推送、AI 主动对话、分配顾问）
- [ ] 实现触发历史记录和效果追踪
- [ ] 创建定时任务系统（Node.js cron）

### 数据库
- [ ] 创建 trigger_rules 表
- [ ] 创建 trigger_logs 表
- [ ] 创建天气数据缓存表

---

## 📱 第五阶段：小红书运营管理

### 账户数据监控
- [ ] 调研小红书 API 或第三方工具（蝉妈妈、新红）
- [ ] 创建小红书运营页面（Xiaohongshu）
- [ ] 实现账户数据监控（浏览、点赞、评论、收藏）
- [ ] 实现数据报表和趋势分析

### 评论管理
- [ ] 实现评论列表和回复功能
- [ ] 实现评论筛选和搜索
- [ ] 实现潜在客户识别
- [ ] 实现评论转线索功能

### 私信管理
- [ ] 实现私信列表（如果 API 支持）
- [ ] 实现私信回复
- [ ] 实现私信转线索功能

### 公域转私域
- [ ] 实现公域转私域追踪（评论/私信 → 线索）
- [ ] 实现渠道效果分析
- [ ] 实现内容效果分析

### 数据库
- [ ] 创建 xiaohongshu_posts 表
- [ ] 创建 xiaohongshu_comments 表
- [ ] 创建 xiaohongshu_messages 表

---

## 🧪 第六阶段：系统集成测试

### 测试
- [ ] 端到端测试（引流 → 对话 → 留资 → Airtable → 触发 → 跟进）
- [ ] 性能优化（数据库索引、查询优化）
- [ ] 安全测试（SQL 注入、XSS 等）
- [ ] 压力测试（并发用户、大数据量）

### 文档
- [ ] 编写用户使用手册
- [ ] 编写系统管理员手册
- [ ] 编写 API 文档
- [ ] 录制功能演示视频

---

## 📊 进度统计

- **已完成**：约 60 项任务
- **第一阶段**：12 项任务（进行中）
- **第二阶段**：9 项任务
- **第三阶段**：15 项任务
- **第四阶段**：18 项任务
- **第五阶段**：12 项任务
- **第六阶段**：8 项任务

**总计**：约 134 项任务

---

*最后更新：2026-02-03*
